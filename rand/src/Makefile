# This Makefile builds the Node DataBlade.

# This is the project title.
PROJECT_TITLE= Random

# TARGET must be set to the location/filename
# of the platform-specific make include file.
# include $(INFORMIXDIR)/incl/dbkd/$(TARGET).mak
#
MI_INCLUDE=$(INFORMIXDIR)/incl
RM= rm
RMFLAGS= -f
# CC= /usr/ucb/cc -KPIC
# CC= /opt/SUNWspro/SC3.0/bin/cc -KPIC
CC= /usr/local/gnu/bin/gcc
COPTS= -g -DTEST_BUILD
CSRVRFLAGS= -DMI_SERVBUILD #  not for gcc, but OK for other -KPIC
CFLAGS= $(CSRVRFLAGS) -I$(MI_INCLUDE)/public -I$(MI_INCLUDE)/esql -I$(MI_INCLUDE) $(COPTS)
LINK= /usr/ccs/bin/ld
LINKFLAGS= -dy -G -B symbolic
LIBS= -ldl -lnsl -lsocket -lm -lrpcsvc -lc
DATABLADE_LIBS=
SHLIBSUFF= bld
BINDIR= ../bin


# Platform independent code goes here.
# The following code was generated by BladeSmith.

# PROJECT_OBJS= $(BINDIR)/$(PROJECT_TITLE).o $(BINDIR)/$(COMPONENT_FILES).o
PROJECT_OBJS= $(BINDIR)/$(PROJECT_TITLE).o 

all: server client

# Construct the object file.
$(BINDIR)/$(PROJECT_TITLE).o : $(PROJECT_TITLE).c 
	$(CC) $(CFLAGS) -o $(BINDIR)/$(PROJECT_TITLE).o -c $(PROJECT_TITLE).c

#
# $(BINDIR)/$(COMPONENT_FILES).o : $(COMPONENT_FILES).c
#	$(CC) $(CFLAGS) -o $(BINDIR)/$(COMPONENT_FILES).o -c $(COMPONENT_FILES).c

# Construct the shared library.
$(BINDIR)/$(PROJECT_TITLE).$(SHLIBSUFF): $(PROJECT_OBJS)
	$(LINK) $(LINKFLAGS) -o $(BINDIR)/$(PROJECT_TITLE).$(SHLIBSUFF) \
	$(PROJECT_OBJS) $(LIBS) $(DATABLADE_LIBS)

server:	$(BINDIR)/$(PROJECT_TITLE).$(SHLIBSUFF)


client:	
	echo "Client Makefile entry is empty - nothing to do."


clean:
	$(RM) $(RMFLAGS)			\
	$(BINDIR)/$(PROJECT_TITLE).$(SHLIBSUFF)	\
	$(BINDIR)/*.o				\
	../bin/$(PROJECT_TITLE).$(SHLIBSUFF)

$(BINDIR):
	-mkdir $(BINDIR)

